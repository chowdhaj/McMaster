\documentclass[11pt,fleqn]{article}

\def\date{February 14, 2020}
\def\term{Winter 2020}

\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{url}
\usepackage{color}
\usepackage{tikz}
\usetikzlibrary{automata,positioning,arrows}

\setlength {\topmargin} {-.15in}
\setlength {\textheight} {8.6in}

\renewcommand{\labelenumi}{\theenumi.}
\renewcommand{\labelenumii}{\theenumii.}
\renewcommand{\labelenumiii}{\theenumiii.}
\newcommand{\be}{\begin{enumerate}}
\newcommand{\ee}{\end{enumerate}}
\newcommand{\bi}{\begin{itemize}}
\newcommand{\ei}{\end{itemize}}
\newcommand{\bc}{\begin{center}}
\newcommand{\ec}{\end{center}}
\newcommand{\bsp}{\begin{sloppypar}}
\newcommand{\esp}{\end{sloppypar}}
\newcommand{\mname}[1]{\mbox{\sf #1}}
\newcommand{\sB}{\mbox{$\cal B$}}
\newcommand{\sC}{\mbox{$\cal C$}}
\newcommand{\sF}{\mbox{$\cal F$}}
\newcommand{\sM}{\mbox{$\cal M$}}
\newcommand{\sP}{\mbox{$\cal P$}}
\newcommand{\sV}{\mbox{$\cal V$}}
\newcommand{\set}[1]{{\{ #1 \}}}
\newcommand{\Neg}{\neg}
\ifdefined \And
\renewcommand{\And}{\wedge}
\else
\newcommand{\And}{\wedge}
\fi
\newcommand{\Or}{\vee}
\newcommand{\Implies}{\Rightarrow}
\newcommand{\Iff}{\LeftRightarrow}
\newcommand{\Forall}{\forall}
\newcommand{\ForallApp}{\forall\,}
\newcommand{\Forsome}{\exists}
\newcommand{\ForsomeApp}{\exists\,}
\newcommand{\mdot}{\mathrel.}
\newcommand{\eps}{\epsilon}
\newcommand{\pnote}[1]{\langle \mbox{#1} \rangle}

\begin{document}

%\thispagestyle{empty}

\bc

  {\large \textbf{COMPSCI/SFWRENG 2FA3}}\\[2mm]
  {\large \textbf{Discrete Mathematics with Applications II}}\\[2mm]
  {\large \textbf{\term}}\\[8mm]
  {\huge \textbf{Week 07 Exercises}}\\[6mm]
  {\large \textbf{Dr.~William M. Farmer}}\\[2mm]
  {\large \textbf{McMaster University}}\\[6mm]
  {\large Revised: \date}

\ec

\medskip

\thispagestyle{empty}

\subsection*{Exercises}

\be

  \item Construct deterministic finite automata $M =
    (Q,\Sigma,\delta,s,F)$ such that:

  \be

    \item $\Sigma = \set{a,b,\ldots,z}$ and $L(M)$ contains the single
      string $calculemus$.

      \textbf{SOLUTION:}
      Let $M$ be the DFA to match $L(M)$, where $\delta$ is illustrated by the below transition diagram:
%% Machine generated by https://finsm.io
%% 2019-2-22-19:09:022
%% include in preamble:
%% \usepackage{tikz}
%% \usetikzlibrary{automata,positioning,arrows}
\begin{center}
\begin{tikzpicture}[]
    \node[line width = 0.55mm,state] at (-6.25,5.75) (bd60d26b) {$q_{1}$};
    \node[thick,state] at (-6.25,7.75) (b9dcc1b0) {$q_{2}$};
    \node[thick,state] at (-2.25,5.75) (042a636e) {$q_{3}$};
    \node[thick,state] at (0,5.75) (35f5226e) {$q_{4}$};
    \node[thick,state] at (2.75,5.75) (cab37d22) {$q_{5}$};
    \node[thick,state] at (2.5,3.5) (dc7dff4e) {$q_{6}$};
    \node[thick,state] at (2.75,1.5) (d8a80107) {$q_{7}$};
    \node[thick,state] at (0,1.5) (91a7f244) {$q_{8}$};
    \node[thick,state] at (-2.25,1.5) (0b3a00ae) {$q_{9}$};
    \node[thick,state] at (-6.25,-0.25) (b7261139) {$q_{10}$};
    \node[thick,accepting,state] at (-6.25,1.5) (e2214b8b) {$q_{11}$};
    \node[thick,state] at (-5.525,3.475) (729d8714) {$q_{12}$};
    \node[thick,state] at (-1.25,7.75) (ffeac859) {$q_{13}$};
    \node[thick,state] at (-0.5,-0.25) (21e2d046) {$q_{14}$};
    \path[->, thick, >=stealth]
    (bd60d26b) edge [left,in = -90, out = 90] node {$c$} (b9dcc1b0)
    (bd60d26b) edge [right,in = 108, out = -72] node {Any $\sigma\in\Sigma\setminus\set{c}$} (729d8714)
    (b9dcc1b0) edge [below,in = 180, out = -45] node {$a$} (042a636e)
    (b9dcc1b0) edge [left,in = 129, out = -159] node {Any $\sigma\in\Sigma\setminus\set{a}$} (729d8714)
    (042a636e) edge [below,in = 180, out = 0] node {$l$} (35f5226e)
    (042a636e) edge [left,in = -127, out = 76] node {Any $\sigma\in\Sigma\setminus\set{l}$} (ffeac859)
    (35f5226e) edge [below,in = 180, out = 0] node {$c$} (cab37d22)
    (35f5226e) edge [right,in = -58, out = 122] node {Any $\sigma\in\Sigma\setminus\set{c}$} (ffeac859)
    (cab37d22) edge [right,in = 84, out = -90] node {$u$} (dc7dff4e)
    (cab37d22) edge [above,in = 25, out = -135] node {Any $\sigma\in\Sigma\setminus\set{u}$} (729d8714)
    (dc7dff4e) edge [right,in = 90, out = -90] node {$l$} (d8a80107)
    (dc7dff4e) edge [above,in = 0, out = -180] node {Any $\sigma\in\Sigma\setminus\set{l}$} (729d8714)
    (d8a80107) edge [above,in = 0, out = 180] node {$e$} (91a7f244)
    (d8a80107) edge [below,in = -12, out = 133] node {Any $\sigma\in\Sigma\setminus\set{e}$} (729d8714)
    (91a7f244) edge [above,in = 0, out = 180] node {$m$} (0b3a00ae)
    (91a7f244) edge [right,in = 56, out = -83] node {Any $\sigma\in\Sigma\setminus\set{m}$} (21e2d046)
    (0b3a00ae) edge [above,in = 45, out = 180] node {$u$} (b7261139)
    (0b3a00ae) edge [left,in = 135, out = -45] node {Any $\sigma\in\Sigma\setminus\set{u}$} (21e2d046)
    (b7261139) edge [left,in = -90, out = 90] node {$s$} (e2214b8b)
    (b7261139) edge [left,in = -131, out = 160] node {Any $\sigma\in\Sigma\setminus\set{s}$} (729d8714)
    (e2214b8b) edge [right,in = -110, out = 70] node {Any $\sigma\in\Sigma$} (729d8714)
    (729d8714) edge [loop,min distance = 1.23cm,left,in = 220, out = 139] node {Any $\sigma\in\Sigma$} (729d8714)
    (ffeac859) edge [loop,min distance = 1.25cm,above,in = 121, out = 59] node {Any $\sigma\in\Sigma$} (ffeac859)
    (21e2d046) edge [loop,min distance = 1cm,below,in = -63, out = -117] node {Any $\sigma\in\Sigma$} (21e2d046)
    ;
\end{tikzpicture}
\end{center}
We've used the notation ``Any $\sigma \in \Sigma$'' to denote any member of the alphabet, to save space. We've also added some extra states ($q_{13}, q_{14}$), which were unnecessary, but makes the diagram easier to read.

    \item $\Sigma = \set{a,b}$ and $L(M) = \set{x \in \Sigma^* \;|\;
      |x| \equiv 0 \mbox{ mod }3}$.

      \textbf{SOLUTION:} Let $M$ be the appropriate DFA with the following transition diagram:
      %% Machine generated by https://finsm.io
%% 2019-2-22-17:48:15
%% include in preamble:
%% \usepackage{tikz}
%% \usetikzlibrary{automata,positioning,arrows}
\begin{center}
\begin{tikzpicture}[]
    \node[line width = 0.55mm,accepting,state] at (-1,3.5) (c4515ee9) {$q_{0}$};
    \node[thick,state] at (-2.25,1.5) (b030b369) {$q_{1}$};
    \node[thick,state] at (0.25,1.5) (14eb3395) {$q_{2}$};
    \path[->, thick, >=stealth]
    (c4515ee9) edge [left,in = 58, out = -122] node {$a,b$} (b030b369)
    (b030b369) edge [below,in = 180, out = 0] node {$a,b$} (14eb3395)
    (14eb3395) edge [right,in = -58, out = 122] node {$a,b$} (c4515ee9)
    ;
\end{tikzpicture}
\end{center}

    \item $\Sigma = \set{0,1}$ and $L(M) = \set{x \in \Sigma^* \;|\;
      \mbox{$x$ contains the string $101$}}$

      \textbf{SOLUTION:} Let the appropriately defined DFA $M$ have the following transition diagram:
      %% Machine generated by https://finsm.io
%% 2019-2-22-17:52:48
%% include in preamble:
%% \usepackage{tikz}
%% \usetikzlibrary{automata,positioning,arrows}
\begin{center}
\begin{tikzpicture}[]
    \node[line width = 0.55mm,state] at (-2.275,3.425) (8231454f) {$q_{0}$};
    \node[thick,state] at (-2.25,1.5) (d32d43ac) {$q_{1}$};
    \node[thick,state] at (-0.075,1.525) (008d4c23) {$q_{2}$};
    \node[thick,accepting,state] at (-0.2,3.425) (74c8c3b8) {$q_{3}$};
    \path[->, thick, >=stealth]
    (8231454f) edge [left,in = 91, out = -89] node {$1$} (d32d43ac)
    (8231454f) edge [loop,min distance = 1.25cm,above,in = 121, out = 59] node {$0$} (8231454f)
    (d32d43ac) edge [below,in = -179, out = 1] node {$0$} (008d4c23)
    (d32d43ac) edge [loop,min distance = 1.15cm,below,in = -61, out = -119] node {$1$} (d32d43ac)
    (008d4c23) edge [right,in = -86, out = 94] node {$1$} (74c8c3b8)
    (008d4c23) edge [right,in = -41, out = 139] node {$0$} (8231454f)
    (74c8c3b8) edge [loop,min distance = 1.25cm,above,in = 121, out = 59] node {$0,1$} (74c8c3b8)
    ;
\end{tikzpicture}
\end{center}

    \item $\Sigma = \set{0,1}$ and $L(M)$ is set of strings in
      $\Sigma^*$ of the form $0^m1^n$ where $m,n \ge 1$.

      \textbf{SOLUTION:}
      Let $M$ be the DFA with the following transition diagram:
      %% Machine generated by https://finsm.io
%% 2019-2-22-17:58:44
%% include in preamble:
%% \usepackage{tikz}
%% \usetikzlibrary{automata,positioning,arrows}
\begin{center}
\begin{tikzpicture}[]
    \node[line width = 0.55mm,state] at (0,3.25) (103409aa) {$q_{0}$};
    \node[thick,accepting,state] at (2,1.5) (53d422fc) {$q_{2}$};
    \node[thick,state] at (0,1.5) (d287608a) {$q_{1}$};
    \node[thick,state] at (2,3.25) (7b907096) {$q_{3}$};
    \path[->, thick, >=stealth]
    (103409aa) edge [left,in = 90, out = -90] node {$0$} (d287608a)
    (103409aa) edge [below,in = 180, out = 0] node {$1$} (7b907096)
    (53d422fc) edge [loop,min distance = 1cm,below,in = -63, out = -117] node {$1$} (53d422fc)
    (53d422fc) edge [right,in = -90, out = 90] node {$0$} (7b907096)
    (d287608a) edge [loop,min distance = 1cm,below,in = -63, out = -117] node {$0$} (d287608a)
    (d287608a) edge [below,in = 180, out = 0] node {$1$} (53d422fc)
    (7b907096) edge [loop,min distance = 1cm,above,in = 117, out = 63] node {$0,1$} (7b907096)
    ;
\end{tikzpicture}
\end{center}

    \item $\Sigma = \set{a,b}$ and $L(M)$ is the set of strings in
      $\Sigma^*$ that contain at least three occurrences of $bbb$.
      Note: Overlapping is permitted so $bbbbb \in L(M)$.

      \textbf{SOLUTION:} Let $M$ be the DFA with the following transition diagram:
      %% Machine generated by https://finsm.io
%% 2019-2-22-18:38:43
%% include in preamble:
%% \usepackage{tikz}
%% \usetikzlibrary{automata,positioning,arrows}
\begin{center}
\begin{tikzpicture}[]
    \node[line width = 0.55mm,state] at (-3.5,0) (134a06f6) {$q_{1}$};
    \node[thick,state] at (-1.5,0) (29d9e867) {$q_{2}$};
    \node[thick,state] at (0.5,0) (dd6393fc) {$q_{3}$};
    \node[thick,state] at (0.5,2.25) (5b2decb2) {$q_{4}$};
    \node[thick,state] at (-1.5,2.25) (5a70bb41) {$q_{5}$};
    \node[thick,state] at (-3.5,2.25) (3ae03b73) {$q_{6}$};
    \node[thick,state] at (-3.5,4.5) (04fb5820) {$q_{7}$};
    \node[thick,state] at (-1.5,4.5) (8f29c3d1) {$q_{8}$};
    \node[thick,state] at (0.5,4.5) (90e29433) {$q_{9}$};
    \node[thick,state] at (0.5,6.25) (00452f17) {$q_{10}$};
    \node[thick,state] at (-1.5,6.25) (86628673) {$q_{11}$};
    \node[thick,accepting,state] at (-3.5,6.25) (03135180) {$q_{12}$};
    \path[->, thick, >=stealth]
    (134a06f6) edge [loop,min distance = 1cm,above,in = 117, out = 63] node {$a$} (134a06f6)
    (134a06f6) edge [below,in = 180, out = 0] node {$b$} (29d9e867)
    (29d9e867) edge [above,in = 37, out = 143] node {$a$} (134a06f6)
    (29d9e867) edge [below,in = 180, out = 0] node {$b$} (dd6393fc)
    (dd6393fc) edge [below,in = -43, out = -139] node {$a$} (134a06f6)
    (dd6393fc) edge [right,in = -90, out = 90] node {$b$} (5b2decb2)
    (5b2decb2) edge [above,in = 0, out = 180] node {$a$} (5a70bb41)
    (5b2decb2) edge [right,in = -51, out = 129] node {$b$} (8f29c3d1)
    (5a70bb41) edge [loop,min distance = 1cm,below,in = -63, out = -117] node {$a$} (5a70bb41)
    (5a70bb41) edge [above,in = 0, out = 180] node {$b$} (3ae03b73)
    (3ae03b73) edge [below,in = -143, out = -37] node {$a$} (5a70bb41)
    (3ae03b73) edge [right,in = -90, out = 90] node {$b$} (04fb5820)
    (04fb5820) edge [below,in = 180, out = 0] node {$b$} (8f29c3d1)
    (04fb5820) edge [left,in = 132, out = -48] node {$a$} (5a70bb41)
    (8f29c3d1) edge [below,in = 180, out = 0] node {$a$} (90e29433)
    (8f29c3d1) edge [right,in = -41, out = 139] node {$b$} (03135180)
    (90e29433) edge [right,in = -90, out = 90] node {$b$} (00452f17)
    (90e29433) edge [loop,min distance = 1cm,below,in = -63, out = -117] node {$a$} (90e29433)
    (00452f17) edge [above,in = 0, out = 180] node {$b$} (86628673)
    (00452f17) edge [left,in = 117, out = -124] node {$a$} (90e29433)
    (86628673) edge [left,in = 149, out = -53] node {$a$} (90e29433)
    (86628673) edge [above,in = 0, out = 180] node {$b$} (03135180)
    (03135180) edge [loop,min distance = 1.25cm,above,in = 121, out = 59] node {$a,b$} (03135180)
    ;
\end{tikzpicture}
\end{center}
    \item $\Sigma = \set{a,b}$ and $L(M) = \set{x_1ax_2 \mid |x_1| \ge
      3 \text{ and } |x_2| \le 4}$.

      \textbf{SOLUTION:} Let $M$ be the DFA with the following transition diagram:

%% Machine generated by https://finsm.io
%% 2019-2-28-12:02:032
%% include in preamble:
%% \usepackage{tikz}
%% \usetikzlibrary{automata,positioning,arrows}
\begin{center}
    \begin{tikzpicture}[]
    \node[line width = 0.55mm,state] at (-5.25,2.75) (17c64d5f) {$q_0$};
    \node[thick,state] at (-3.5,2.75) (8869cc00) {$q_{1}$};
    \node[thick,state] at (-1.75,2.75) (2119eb1a) {$q_{2}$};
    \node[thick,state] at (0,2.75) (b8017f76) {$q_{3}$};
    \node[thick,accepting,state] at (1.75,2.75) (a09e7aab) {$q_{4}$};
    \node[thick,accepting,state] at (1.75,-0.75) (181841fa) {$q_{5}$};
    \node[thick,accepting,state] at (-0.75,-0.75) (a94df3c0) {$q_{6}$};
    \node[thick,accepting,state] at (-2.75,-0.75) (81a4541f) {$q_{7}$};
    \node[thick,accepting,state] at (-5.25,-0.75) (41c88bff) {$q_{8}$};
    \path[->, thick, >=stealth]
    (17c64d5f) edge [below,in = 180, out = 0] node {$a,b$} (8869cc00)
    (8869cc00) edge [below,in = 180, out = 0] node {$a,b$} (2119eb1a)
    (2119eb1a) edge [below,in = 180, out = 0] node {$a,b$} (b8017f76)
    (b8017f76) edge [below,in = 180, out = 0] node {$a$} (a09e7aab)
    (b8017f76) edge [loop,min distance = 1.25cm,above,in = 121, out = 59] node {$b$} (b8017f76)
    (a09e7aab) edge [left,in = 90, out = -90] node {$b$} (181841fa)
    (a09e7aab) edge [loop,min distance = 1.25cm,above,in = 121, out = 59] node {$a$} (a09e7aab)
    (181841fa) edge [above,in = 0, out = 180] node {$b$} (a94df3c0)
    (181841fa) edge [right,in = -47, out = 51] node {$a$} (a09e7aab)
    (a94df3c0) edge [above,in = 0, out = 180] node {$b$} (81a4541f)
    (a94df3c0) edge [right,in = -120, out = 47] node {$a$} (a09e7aab)
    (81a4541f) edge [above,in = 0, out = 180] node {$b$} (41c88bff)
    (81a4541f) edge [right,in = -133, out = 31] node {$a$} (a09e7aab)
    (41c88bff) edge [right,in = -151, out = 25] node {$a$} (a09e7aab)
    (41c88bff) edge [left,in = -123, out = 59] node {$b$} (b8017f76)
    ;
    \end{tikzpicture}
\end{center}

  \ee

  \item Let $M = (Q,\Sigma,\delta,s,F)$ and $M' =
    (Q,\Sigma,\delta,s,\set{q \in Q \mid q \not\in F})$ be DFAs.
    Prove that $L(M') = {\sim}L(M)$.

    \begin{proof}
    We begin by noting the definition of the languages:
    \begin{align*}
    L(M') &= \set{x \in \Sigma^* \mid \hat\delta(s,x) \in \set{q\in Q\mid q \not \in F}}\\
    {\sim}L(M) &= {\sim}\set{x \in \Sigma^* \mid \hat\delta(s,x) \in F}
    \end{align*}
    Then, we have
    \begin{align*}
    L(M') &= \set{x \in \Sigma^* \mid \hat\delta(s,x) \in \set{q\in Q\mid q \not \in F}} & \pnote{Definition of $L(M')$}\\
    &= \set{x \in \Sigma^* \mid \hat\delta(s,x) \in {\sim}F} & \pnote{Set complement}\\
    &= \set{x \in \Sigma^* \mid \hat\delta(s,x) \not \in F} & \pnote{Membership of complement}\\
    &= {\sim}\set{x \in \Sigma^* \mid \hat\delta(s,x) \in F} & \pnote{Set complement}\\
    &= {\sim}L(M) & \pnote{Definition of ${\sim}L(M)$}
    \end{align*}
    as required.
    \end{proof}

  \item Let $\Sigma$ be a finite alphabet and $B \subseteq \Sigma^*$.
    $B$ is \emph{reflexive} if $\epsilon \in B$ and is
    \emph{transitive} if $BB \subseteq B$.  Prove that, if $A
    \subseteq \Sigma^*$, then $A^*$ is smallest reflexive and
    transitive set containing $A$.  That is, show that (1) $A
    \subseteq A^*$, (2) $A^*$ is reflexive, (3) $A^*$ is transitive,
    and (4) if $B$ is any other reflexive and transitive set
    containing $A$, then $A^* \subseteq B$.
    \begin{proof}
    We begin by noting the definition of $A^*$: \[A^* = \bigcup_{n\geq0}A^n = A^0 \cup A^1 \cup A^2 \cup \cdots\] From this,  we know that $A \subseteq A^*$, as $A$ appears in the iterated union of $A^*$.

    Also, we know that $A^0 = \set\eps$. Thus, $\eps \in A^*$, so $A^*$ is reflexive.

    Since $A^*$ is the set of all possible strings buildable from strings in $A$, we have that $A^*A^* \subseteq A^*$. We can show this by building an injective map $f:A^*A^* \rightarrow A^*$. For any member from the domain ($A^*A^*$), we can map it to a unique member of the codomain ($A^*$). The member of the codomain must have the form $xy$ where $x,y\in A^*$. Furthermore, $x$ must come from $A^n$ for some appropriate $n \in \mathbb{N}$. $y$ must similarly come from $A^m$ for some appropriate $m \in \mathbb{N}$. Yet, $xy \in A^{n+m} \subseteq A^*$, so we must have that $A^*A^* \subseteq A^*$, so $A^*$ is transitive.

    We know $A^* \subseteq B$ if for any string $x \in A^*$, we have that $x \in B$. For any $x \in A^*$, we can write it as a concatenation of strings $x_1x_2x_3\ldots x_\ell$ where $x_1,x_2,x_3,\ldots x_\ell \in A$. We can do a proof by induction on $\ell$ to show that $x \in B$.
    \begin{proof}
    \emph{Base case:} $\ell = 0$. i.e. $x = \eps$. $B$ is reflexive, so $\eps \in B$.

    \emph{Induction Step:} Assume that if $x_1,x_2,\ldots,x_\ell \in A^\ell$, then $x_1x_2\ldots x_\ell \in B$.
    So, for any string $x_1,x_2,\ldots,x_{\ell+1} \in A^*$, we know that $x_1,x_2,\ldots,x_{\ell+1} \in A^\ell A $.
    We also know from the induction hypothesis that $A^\ell \subseteq B$ and we know from the question that $A \subseteq B$. Therefore, $x_1,x_2,\ldots,x_{\ell+1} \subseteq BB $
    \end{proof}
    Thus, $A^* \subseteq B$, as required.
    \end{proof}

  \item Let $M = (Q,\Sigma,\delta,s,F)$ be a DFA.  Prove by induction
    on $|y|$ that, for all $x,y \in \Sigma^*$ and $q \in
    Q$, \[\hat{\delta}(q,xy) = \hat{\delta}(\hat{\delta}(q,x),y).\]
    \begin{proof}
    Let $P(y) \equiv \hat\delta(q,xy) = \hat\delta(\hat\delta(q,x),y)$. We will prove $P(y)$ by induction over $|y|$, for any state $q \in Q$ and $x \in \Sigma^*$.

    \emph{Base case:} $|y| = 0$, i.e. $y = \eps$.
    \begin{align*}
    P(\eps) &\equiv \hat\delta(\hat\delta(q,x),\eps) & \pnote{Definition of $P$}\\
    &= \hat\delta(q,x) & \pnote{Definition of $\hat\delta$}\\
    &= \hat\delta(q,x\eps) & \pnote{Identity of concatenation}
    \end{align*}

    \emph{Induction step:} Assume $P(y)$. Show that, for any $\sigma \in \Sigma$, we have $P(y\sigma)$.
    \begin{align*}
    P(y\sigma) &\equiv \hat\delta(\hat\delta(q,x),y\sigma) & \pnote{Definition of $P$}\\
    &= \delta(\hat\delta(\hat\delta(q,x),y),\sigma) & \pnote{Definition of $\hat\delta$}\\
    &= \delta(\hat\delta(q,xy),\sigma) & \pnote{Induction hypothesis}\\
    &= \hat\delta(q, xy\sigma) & \pnote{Definition of $\hat\delta$}
    \end{align*}
    Thus, by induction over $|y|$, we have that $P$ holds for all $x,y \in \Sigma^*$ and $q \in Q$, as required.
    \end{proof}

\ee
\end{document}
